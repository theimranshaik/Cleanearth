<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>CleanEarth Game</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Fredoka+One&display=swap" rel="stylesheet">

<style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    user-select: none;
  }
  body {
    background: #f0f9f0;
    font-family: 'Comic Neue', sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 1rem;
    background: #6c63ff;
    color: white;
    font-size: 1.4rem;
  }
  #logo {
    font-weight: bold;
    font-family: 'Fredoka One', sans-serif;
  }
  #score {
    font-size: 1.4rem;
  }
  #game {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding-bottom: 7rem; /* room for bottom buttons */
  }
  #emoji {
    font-size: 3rem;
    height: 3rem;
    margin-bottom: 0.3rem;
  }
  #item {
    font-family: 'Fredoka One', sans-serif;
    font-size: 2rem;
    text-align: center;
    padding: 0.5rem;
    word-wrap: break-word;
    max-width: 90%;
    transition: color 0.3s ease;
    opacity: 0;
  }
  #item.fade-in {
    animation: fadeIn 0.5s forwards;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  #feedback {
    text-align: center;
    font-size: 1.1rem;
    padding: 0.5rem;
    min-height: 3rem;
    max-width: 90%;
  }
  .buttons {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-around;
    padding: 0.5rem;
    background: #ffffff;
    z-index: 10;
  }
  button {
    flex: 1;
    margin: 0 0.3rem;
    padding: 0.6rem;
    font-size: 1.1rem;
    border: none;
    border-radius: 12px;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .recycle {background: #4caf50;}
  .compost {background: #ff9800;}
  .trash {background: #9e9e9e;}
  button span {
    font-size: 2rem;
    line-height: 2rem;
  }

  /* Popup overlay */
  #popup, #badgePopup {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }
  #popupContent, #badgeContent {
    background: #ffffff;
    padding: 1rem;
    border-radius: 12px;
    max-width: 90%;
    text-align: center;
    font-size: 1.1rem;
  }
  #popupContent button, #badgeContent button {
    display: block;
    margin: 0.8rem auto 0;
    background: #6c63ff;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-size: 1rem;
  }
</style>
</head>
<body>

<header>
  <div id="logo">CleanEarth</div>
  <div>Score: <span id="score">0</span></div>
</header>

<!-- Game area -->
<div id="game">
  <div id="emoji"></div>
  <div id="item">Loading...</div>
  <div id="feedback"></div>
</div>

<!-- Buttons -->
<div class="buttons">
  <button class="recycle" onclick="checkAnswer('recycle')">
    <span>‚ôªÔ∏è</span>
    Recycle
  </button>
  <button class="compost" onclick="checkAnswer('compost')">
    <span>üå±</span>
    Compost
  </button>
  <button class="trash" onclick="checkAnswer('trash')">
    <span>üóëÔ∏è</span>
    Trash
  </button>
</div>

<!-- Popup How to Play -->
<div id="popup">
  <div id="popupContent">
    <h2>How to Play</h2>
    <p>üëâ See the item on the screen.</p>
    <p>üïπ Tap the right button where it should go.</p>
    <p>üåü Get points and learn cool facts!</p>
    <button onclick="startGame()">Got it!</button>
  </div>
</div>

<!-- Badge Popup -->
<div id="badgePopup" style="display:none;">
  <div id="badgeContent">
    <h2 id="badgeTitle"></h2>
    <p id="badgeText"></p>
    <button onclick="closeBadge()">Thank you</button>
  </div>
</div>

<!-- Sounds -->
<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<!-- Calm background music -->
<audio id="bgMusic" src="https://cdn.pixabay.com/audio/2023/06/04/audio_1e3e826005.mp3" loop></audio>

<script>
// leave items empty, you fill later
const items = [
  {icon:'üçº', name: 'Plastic bottle', correct: 'recycle', fact: 'Plastic bottles can be turned into new bottles. Putting them in recycle saves energy.'},
  {icon:'üçå', name: 'Banana peel', correct: 'compost', fact: 'Banana peels go in compost. They make healthy soil.'},
  {icon:'ü•§', name: 'Styrofoam cup', correct: 'trash', fact: 'Styrofoam cannot be recycled easily. It goes to trash.'},
  {icon:'üì∞', name: 'Newspaper', correct: 'recycle', fact: 'Old newspapers can be recycled into new paper.'},
  {icon:'üçé', name: 'Apple core', correct: 'compost', fact: 'Apple cores break down into soil in compost.'},
  {icon:'', name: 'Coconut shell', correct: 'compost', fact: 'Coconut shells can break down in compost pits over time.'},
  {icon:'', name: 'Masala packet', correct: 'trash', fact: 'Plastic masala packets cannot be recycled easily and go to trash.'},
  {icon:'', name: 'Used tea bag', correct: 'compost', fact: 'Used tea bags can go into compost and enrich the soil.'},
  {icon:'', name: 'Coconut husk', correct: 'compost', fact: 'Coconut husks are biodegradable and can be composted.'},
  {icon:'', name: 'Plastic pickle jar', correct: 'recycle', fact: 'Clean plastic pickle jars can be recycled into new plastic items.'},
  {icon:'', name: 'Used matchsticks', correct: 'trash', fact: 'Used matchsticks usually go to trash as they are burned and cannot be recycled.'},
  {icon:'', name: 'Banana leaves', correct: 'compost', fact: 'Banana leaves are biodegradable and can be added to compost.'},
  {icon:'', name: 'Old sari pieces', correct: 'recycle', fact: 'Old cloth like sari pieces can be recycled or repurposed into rags.'},
  {icon:'', name: 'Cardboard milk pack', correct: 'recycle', fact: 'Cardboard milk packs can be recycled into new paper products.'},
  {icon:'', name: 'Vegetable peels', correct: 'compost', fact: 'Vegetable peels decompose quickly and are perfect for compost.'},
  {icon:'', name: 'Plastic spoon', correct: 'trash', fact: 'Disposable plastic spoons are non-biodegradable and should go to trash.'},
  {icon:'', name: 'Steel tiffin box', correct: 'recycle', fact: 'Steel tiffin boxes can be recycled into new steel items.'},
  {icon:'', name: 'Areca plate', correct: 'compost', fact: 'Areca leaf plates are biodegradable and can go into compost.'},
  {icon:'', name: 'Plastic chai cup', correct: 'trash', fact: 'Plastic tea cups often end up as trash; better to use reusable cups.'},
  {icon:'', name: 'Paper plate', correct: 'recycle', fact: 'Paper plates can be recycled if clean and dry.'},
  {icon:'', name: 'Rice leftovers', correct: 'compost', fact: 'Leftover cooked rice decomposes well in compost bins.'},
  {icon:'', name: 'Old school notebook', correct: 'recycle', fact: 'Old notebooks can be recycled to make new paper.'},
  {icon:'', name: 'Incense stick ash', correct: 'compost', fact: 'Ash from incense sticks can be mixed into soil or compost.'},
  {icon:'', name: 'Broken clay pot', correct: 'trash', fact: 'Broken clay pots cannot be easily recycled and usually go to trash.'},
  {icon:'', name: 'Jute bag', correct: 'recycle', fact: 'Jute bags are natural fiber and can be recycled or reused many times.'},
  {icon:'üõçÔ∏è', name: 'Plastic bag', correct: 'trash', fact: 'Plastic bags often go to trash. Better to use cloth bags.'},
  {icon:'üçæ', name: 'Glass bottle', correct: 'recycle', fact: 'Glass bottles can be melted and made new many times.'},
  {icon:'üçµ', name: 'Tea leaves', correct: 'compost', fact: 'Tea leaves are food waste. Compost them to feed the soil.'},
  {icon:'üîã', name: 'Battery', correct: 'trash', fact: 'Batteries should be dropped at special collection points. Do not recycle in home bin.'},
  {icon:'üì¶', name: 'Cardboard box', correct: 'recycle', fact: 'Cardboard can be recycled into new boxes.'}
];

const badges = [
  {score:5, title:"Eco Warrior", text:"Great job! You are an Eco Warrior."},
  {score:10, title:"Eco Hero", text:"Amazing! You are an Eco Hero."},
  {score:15, title:"Eco Leader", text:"Awesome! You are an Eco Leader."},
  {score:20, title:"Earth Guardian", text:"Fantastic! You are an Earth Guardian."},
  {score:25, title:"Planet Protector", text:"Incredible! You are a Planet Protector."}
];

let currentIndex = 0;
let score = 0;
let shuffledItems = [];
let inputLocked = false;

function shuffle(array) {
  return array
    .map(value => ({ value, sort: Math.random() }))
    .sort((a, b) => a.sort - b.sort)
    .map(({ value }) => value);
}

function startGame() {
  document.getElementById('popup').style.display = 'none';
  shuffledItems = shuffle(items);
  currentIndex = 0;
  score = 0;
  document.getElementById('score').textContent = score;
  showItem();
  document.getElementById('bgMusic').play().catch(()=>{});
}

function showItem() {
  if (shuffledItems.length === 0) {
    document.getElementById('item').textContent = 'No items loaded!';
    return;
  }
  inputLocked = false;
  const item = shuffledItems[currentIndex];
  document.getElementById('emoji').textContent = '';
  const itemDiv = document.getElementById('item');
  itemDiv.classList.remove('fade-in');
  void itemDiv.offsetWidth; // restart animation
  itemDiv.textContent = (item.icon || '') + ' ' + item.name;
  itemDiv.style.color = '#333';
  itemDiv.classList.add('fade-in');
  document.getElementById('feedback').textContent = '';
}

function checkAnswer(choice) {
  if (inputLocked) return;
  inputLocked = true;

  const item = shuffledItems[currentIndex];
  const correctSound = document.getElementById('correctSound');
  const wrongSound = document.getElementById('wrongSound');
  const itemDiv = document.getElementById('item');
  const emojiDiv = document.getElementById('emoji');

  if (choice === item.correct) {
    score++;
    itemDiv.style.color = '#2e7d32';
    emojiDiv.textContent = '‚úÖ';
    document.getElementById('feedback').textContent = 'Good! ' + item.fact;
    correctSound.play();
  } else {
    itemDiv.style.color = '#c62828';
    emojiDiv.textContent = '‚ùå';
    document.getElementById('feedback').textContent = 'Oops! ' + item.fact;
    wrongSound.play();
  }
  document.getElementById('score').textContent = score;

  // check badge
  showBadgeIfAny(score);

  currentIndex = (currentIndex + 1) % shuffledItems.length;
  setTimeout(showItem, 4000);
}

function showBadgeIfAny(sc) {
  const badge = badges.find(b => b.score === sc);
  if (badge) {
    document.getElementById('badgeTitle').textContent = badge.title;
    document.getElementById('badgeText').textContent = badge.text;
    document.getElementById('badgePopup').style.display = 'flex';
  }
}

function closeBadge() {
  document.getElementById('badgePopup').style.display = 'none';
}
</script>
</body>
</html>
